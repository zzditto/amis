amis.define("1e5b785",(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e("node_modules/tslib/tslib"),s=(0,n.__importDefault)(e("node_modules/react/index")),r=(0,n.__importDefault)(e("node_modules/froala-editor/js/froala_editor.min")),l=(0,n.__importDefault)(e("node_modules/froala-editor/js/froala_editor.min"));e("node_modules/froala-editor/js/plugins/align.min"),e("node_modules/froala-editor/js/plugins/colors.min"),e("node_modules/froala-editor/js/plugins/char_counter.min"),e("node_modules/froala-editor/js/plugins/code_view.min"),e("node_modules/froala-editor/js/plugins/draggable.min"),e("node_modules/froala-editor/js/plugins/entities.min"),e("node_modules/froala-editor/js/plugins/font_family.min"),e("node_modules/froala-editor/js/plugins/font_size.min"),e("node_modules/froala-editor/js/plugins/forms.min"),e("node_modules/froala-editor/js/plugins/fullscreen.min"),e("node_modules/froala-editor/js/plugins/help.min"),e("node_modules/froala-editor/js/plugins/image.min"),e("node_modules/froala-editor/js/plugins/inline_class.min"),e("node_modules/froala-editor/js/plugins/inline_style.min"),e("node_modules/froala-editor/js/plugins/line_breaker.min"),e("node_modules/froala-editor/js/plugins/line_height.min"),e("node_modules/froala-editor/js/plugins/link.min"),e("node_modules/froala-editor/js/plugins/lists.min"),e("node_modules/froala-editor/js/plugins/paragraph_format.min"),e("node_modules/froala-editor/js/plugins/paragraph_style.min"),e("node_modules/froala-editor/js/plugins/print.min"),e("node_modules/froala-editor/js/plugins/quick_insert.min"),e("node_modules/froala-editor/js/plugins/quote.min"),e("node_modules/froala-editor/js/plugins/save.min"),e("node_modules/froala-editor/js/plugins/special_characters.min"),e("node_modules/froala-editor/js/plugins/table.min"),e("node_modules/froala-editor/js/plugins/url.min"),e("node_modules/froala-editor/js/plugins/video.min"),e("node_modules/froala-editor/js/plugins/word_paste.min"),e("node_modules/froala-editor/js/languages/zh_cn");var d=function(e){function t(t){var i=e.call(this,t)||this;return i.listeningEvents=[],i.element=null,i.editor=null,i.config={immediateReactModelUpdate:!1,reactIgnoreAttrs:null},i.editorInitialized=!1,i.INNER_HTML_ATTR="innerHTML",i.oldModel=null,i}return(0,n.__extends)(t,e),t.prototype.componentDidMount=function(){this.createEditor()},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(){JSON.stringify(this.oldModel)!=JSON.stringify(this.props.model)&&this.setContent()},t.prototype.clone=function(e){var t,i=this;if(!e)return e;if([Number,String,Boolean].forEach((function(i){e instanceof i&&(t=i(e))})),void 0===t)if("[object Array]"===Object.prototype.toString.call(e))t=[],e.forEach((function(e,o,n){t[o]=i.clone(e)}));else if("object"==typeof e)if(e.nodeType&&"function"==typeof e.cloneNode)t=e.cloneNode(!0);else if(e.prototype)t=e;else if(e instanceof Date)t=new Date(e);else for(var o in t={},e)t[o]=i.clone(e[o]);else t=e;return t},t.prototype.createEditor=function(){var e=this;this.editorInitialized||(this.config=this.clone(this.props.config||this.config),this.config=(0,n.__assign)({},this.config),this.element=this.el,this.props.model&&(this.element.innerHTML=this.props.model),this.setContent(),this.registerEvent("initialized",this.config.events&&this.config.events.initialized),this.config.events||(this.config.events={}),this.config.events.initialized=function(){e.editorInitialized=!0,e.initListeners()},this.editor=new r.default(this.element,this.config))},t.prototype.setContent=function(){var e=this;(this.props.model||""==this.props.model)&&(this.oldModel=this.props.model,this.editorInitialized?this.setNormalTagContent():(this._initEvents||(this._initEvents=[]),this._initEvents.push((function(){return e.setNormalTagContent()}))))},t.prototype.setNormalTagContent=function(){var e=this;e.editor.html&&e.editor.html.set(e.props.model||""),e.editorInitialized&&e.editor.undo&&(e.editor.undo.reset(),e.editor.undo.saveStep())},t.prototype.destroyEditor=function(){this.element&&(this.editor.destroy&&this.editor.destroy(),this.listeningEvents.length=0,this.element=null,this.editorInitialized=!1,this._initEvents=[])},t.prototype.getEditor=function(){return this.element?this.editor:null},t.prototype.updateModel=function(){if(this.props.onModelChange){var e="",t=this.editor.html.get();"string"==typeof t&&(e=t),this.oldModel=e,this.props.onModelChange(e)}},t.prototype.initListeners=function(){var e=this;if(this.editor.events.on("contentChanged",(function(){e.updateModel()})),this.config.immediateReactModelUpdate&&this.editor.events.on("keyup",(function(){e.updateModel()})),this._initEvents)for(var t=0;t<this._initEvents.length;t++)this._initEvents[t].call(this.editor)},t.prototype.registerEvent=function(e,t){e&&t&&("initialized"==e?(this._initEvents||(this._initEvents=[]),this._initEvents.push(t)):(this.config.events||(this.config.events={}),this.config.events[e]=t))},t.prototype.render=function(){var e=this;return s.default.createElement("textarea",{ref:function(t){return e.el=t}},this.props.children)},t}(s.default.Component),a=function(e){function t(t){var i=e.call(this,t)||this;return l.default.VIDEO_PROVIDERS=[{test_regex:/.*/,url_regex:"",url_text:"",html:'<span class="fr-video fr-dvb fr-draggable" contenteditable="false" draggable="true"><video class="fr-draggable" controls="" data-msg="ok" data-status="0" src="{url}" style="width: 600px;"></video></span>'}],i}return(0,n.__extends)(t,e),t.prototype.render=function(){return s.default.createElement(d,{config:this.props.config,model:this.props.model,onModelChange:this.props.onModelChange})},t}(s.default.Component);t.default=a}));